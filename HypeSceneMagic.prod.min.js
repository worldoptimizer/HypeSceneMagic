/*
 Hype SceneMagic 2.7.3 (GSAP Version)
 Copyright (c) 2025 Max Ziebell, (https://maxziebell.de). MIT-license
 Requires GSAP animation library (https://greensock.com/gsap/)
*/
'use strict';"HypeSceneMagic"in window===!1&&(window.HypeSceneMagic=function(){function R(a){const e={},l=y("defaultProperties");for(let b in l)y("skipProperties").includes(b)||(e[b]=a.style[b]||l[b]);return e}function y(a){return a?I[a]:I}function J(a){a=a||"power1.inOut";return y("easingMap")[a.toLowerCase()]||a}function Z(a){return a.parentElement&&a.parentElement.classList.contains("HYPE_element_container")?a.parentElement:a}function aa(a,e){return e==="front"||e==="back"?(a=Array.from(a.parentElement.children).map(l=>
parseInt(getComputedStyle(l).zIndex)||0),e==="front"?(Math.max(...a)+1).toString():(Math.min(...a)-1).toString()):e}function B(a){const e=[];a.classList.forEach(l=>{l.toLowerCase().startsWith("magic")&&l.length>5&&e.push(l.slice(5).toLowerCase())});(a=a.getAttribute("data-transition-id"))&&e.push(...a.split(",").map(l=>l.trim().toLowerCase()).map(l=>l.startsWith("magic")?l.slice(5):l).filter(Boolean));return[...(new Set(e))]}function N(a,e,l){const b=d=>{if(typeof d==="string"){if(d.endsWith("%"))return parseFloat(d)/
100*parseFloat(l);if(d.endsWith("ms"))return parseFloat(d)/1E3;if(d.endsWith("s"))return parseFloat(d)}return parseFloat(d)*parseFloat(l)};a=b(a);e=b(e);return{delay:a,duration:e}}function ba(){if(!document.getElementById("magicTransitionStyle")){let a=document.createElement("style");a.id="magicTransitionStyle";a.textContent=".magicTransition, .magicTransition * { pointer-events: none !important; }.magicTransition \x3e .HYPE_scene { transform: none !important; }.magicTransition \x3e .HYPE_scene.currentScene { z-index: 1 !important; display: block !important; }.magicTransition \x3e .HYPE_scene.targetScene { z-index: 2 !important; display: block !important; opacity: var(--scene-opacity, 0) !important; }.magicTransition \x3e .HYPE_document \x3e .HYPE_element_container { z-index: 1000 !important; }.magicTransition \x3e .HYPE_scene.currentScene.fadeComplete { display: none !important; }.magicTransition \x3e .HYPE_scene.targetScene.fadeComplete { opacity: 1 !important; }";
document.head.appendChild(a)}}function K(a){if(!a)return null;const e={},l=["scale","scaleX","scaleY","scaleZ"];a.split(";").filter(Boolean).forEach(b=>{const [d,h]=b.trim().split(":").map(g=>g.trim());l.includes(d)&&h.endsWith("%")?e[d]=parseFloat(h)/100:e[d]=h});return e}function U(a,e){typeof e==="string"&&(e=K(e));I.registeredAnimations[a.toLowerCase()]=e}function O(a){return I.registeredAnimations[a.toLowerCase()]||null}function ca(a){const e=[];a.masterTimeline.getChildren().forEach(l=>{l.progress()!==
1&&l._targets&&Array.isArray(l._targets)&&l._targets.forEach(b=>{if(b&&b.id){var d=B(b);const h=[b.getAttribute("data-transition-animation")&&`animation: ${b.getAttribute("data-transition-animation")}`,b.getAttribute("data-transition-animation-from")&&`animation-from: ${b.getAttribute("data-transition-animation-from")}`,b.getAttribute("data-transition-animation-to")&&`animation-to: ${b.getAttribute("data-transition-animation-to")}`].filter(Boolean);d=`${b.id} (magic: ${d.length>0?d.join(", "):"none"})`;
b=[b.getAttribute("data-transition-delay")&&`delay: ${b.getAttribute("data-transition-delay")}`,b.getAttribute("data-transition-duration")&&`duration: ${b.getAttribute("data-transition-duration")}`,h.length>0&&h.join(", ")].filter(Boolean);b.length>0&&(d+=` - ${b.join(", ")}`);e.push(d)}})});a=["font-weight: bold;","font-weight: normal;"];e.length>0?console.warn("%cHypeSceneMagic: %cPrevious magic transition was interrupted by a new one. This indicates overlapping magic transitions in your Hype document.\n\n%cInterrupted elements:\n%c"+
e.map((l,b)=>`${b+1}. ${l}`).join("\n"),...a,"font-weight: bold; margin-top: 8px;","font-family: monospace; font-size: 11px; line-height: 1.8; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);"):console.warn("%cHypeSceneMagic: %cPrevious magic transition was interrupted by a new one. This indicates overlapping magic transitions in your Hype document.",...a)}function S(a){if(!a)return{rotations:{},transform:""};const e={};a=a.replace(/(rotate[XYZ]?|rotate)\(([^)]+)\)/g,(l,
b,d)=>{e[b]=d;return""}).trim();return{rotations:e,transform:a}}let I={easingMap:{easein:"power1.in",easeout:"power1.out",easeinout:"power1.inOut"},defaultProperties:{width:"auto",height:"auto",opacity:1,borderRadius:"0px",transform:"",wordSpacing:"normal",backgroundColor:"transparent",color:"inherit",fontSize:"inherit",fontWeight:"inherit",textAlign:"left",textShadow:"none",lineHeight:"normal",letterSpacing:"normal",textDecoration:"none"},crossFadeFactor:.5,durationTransition:.5,durationAnimation:.25,
registeredAnimations:{},hypePropertyMap:{x:"left",y:"top",scale:["scaleX","scaleY"],scaleX:"scaleX",scaleY:"scaleY",rotation:"rotateZ",opacity:"opacity",width:"width",height:"height",zIndex:"z-index"},skipProperties:[],decomposeTransform:!0,highlightSceneMagic:!0},C=new WeakMap,P=new WeakMap;const L=new WeakMap;"HYPE_eventListeners"in window===!1&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,e,l){ba();a.registerAnimation=U;a.showSceneNamedMagic=
function(b,d,h,g={}){if(e.classList.contains("magicTransition")){var k=L.get(a);if(k&&k.masterTimeline){ca(k);k.masterTimeline.progress(1);gsap.killTweensOf(k.masterTimeline);delete k.masterTimeline;requestAnimationFrame(()=>{this.showSceneNamedMagic(b,d,h,g)});return}}k=this.currentSceneName();const D=this.currentLayoutName();if(b!==k)if(this.sceneNames().includes(b)){var p=this.layoutsForSceneNamed(k),t=p.find(c=>{if(c.name===D)return!0})||p[0];p=this.layoutsForSceneNamed(b);var z=p.find(c=>c.name===
D)||p.find(c=>c.width===t.width&&c.height===t.height)||p[0];p=t._;z=z._;var u=document.querySelector(`#${this.documentId()} > [hype_scene_index="${p}"]`),x=document.querySelector(`#${this.documentId()} > [hype_scene_index="${z}"]`);P=new WeakMap;d=d||y("durationTransition");p=g.crossFadeFactor!==void 0?g.crossFadeFactor:y("crossFadeFactor");p*=d;e.classList.add("magicTransition");u.classList.add("currentScene");x.classList.add("targetScene");if(g.onTransitionPrepare)g.onTransitionPrepare(u,x,{duration:d,
ease:h});a.triggerCustomBehaviorNamed("magicTransitionStart");a.triggerCustomBehaviorNamed(`magicTransitionFrom_${k.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransitionTo_${b.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransition_${k.replace(/\s+/g,"")}_to_${b.replace(/\s+/g,"")}`);a.showSceneNamed(b,a.kSceneTransitionCrossfade,d);var F=gsap.timeline({onStart:()=>{if(g.onTransitionStart)g.onTransitionStart(u,x,{duration:d,ease:h})},onUpdate:function(){if(g.onTransitionProgress)g.onTransitionProgress(this.progress(),
u,x)},onComplete:()=>{const c=()=>{var v=getComputedStyle(x).opacity;if(parseFloat(v)==1){requestAnimationFrame(()=>{V.forEach(f=>{const m=P.get(f);m&&gsap.set(f,m)})});e.classList.remove("magicTransition");u.classList.remove("currentScene","fadeComplete");x.classList.remove("targetScene","fadeComplete");if(g.onTransitionEnd)g.onTransitionEnd(u,x,{duration:d,ease:h});a.triggerCustomBehaviorNamed("magicTransitionEnd");(v=L.get(a))&&delete v.masterTimeline}else requestAnimationFrame(c)};c()}});F.to({},
{duration:d});F.fromTo(x,{"--scene-opacity":0},{"--scene-opacity":1,duration:p,ease:"none",onComplete:()=>{u.classList.add("fadeComplete");x.classList.add("fadeComplete");gsap.killTweensOf(u.querySelectorAll("*"))}},0);var W=x.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),X=u.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),V=new Set,T=c=>{C.has(c)&&!P.has(c)&&P.set(c,C.get(c));V.add(c)};W.forEach(c=>{const v=B(c);if(v.length>0){const G=Array.from(X).find(r=>
B(r).some(w=>v.includes(w)));if(G){gsap.killTweensOf([c,G]);T(G);const r=R(G);var f=C.get(G);if(f&&f.transform){const q={...f};({rotations:f}=S(q.transform));Object.assign(q,f);r.transform&&!r.transform.includes("rotate")&&["rotate","rotateX","rotateY","rotateZ"].forEach(E=>{const A=parseFloat(q[E])||0;A!==0&&A%360===0&&(r[E]=A+"deg")})}const w={...(C.get(c)||R(c))};function Q(q,E){let A=G.getAttribute(q);return A==="target"?c.getAttribute(q)||E:A||E}f=Q("data-transition-delay",0);var m=Q("data-transition-duration",
1),n=Q("data-transition-order",null);f=N(f,m,d);m=Q("data-transition-ease",h);let M=null;n!==null&&(M=Z(c),n=aa(M,n),gsap.set(M,{zIndex:n}));n=gsap.timeline({onComplete:()=>{M&&gsap.set(M,{clearProps:"zIndex"})}});if(y("decomposeTransform")){var H=S(r.transform);Object.assign(r,H.rotations);r.transform=H.transform;H=S(w.transform);Object.assign(w,H.rotations);w.transform=H.transform;["rotate","rotateX","rotateY","rotateZ"].forEach(q=>{const E=parseFloat(r[q])||0,A=(parseFloat(w[q])||0)-E;A!==0?(r[q]=
E+"deg",w[q]=`+=${A}`):(delete r[q],delete w[q])});["width","height"].forEach(q=>{r[q]==="auto"&&w[q]==="auto"&&(delete r[q],delete w[q])})}n.fromTo(c,r,{...w,duration:f.duration,ease:J(m)},f.delay);n.fromTo(G,r,{...w,duration:f.duration,ease:J(m)},f.delay);F.add(n,0)}else if(m=c.getAttribute("data-transition-animation-from")||c.getAttribute("data-transition-animation"))gsap.killTweensOf(c),m.includes(":")||(f=O(m)),f||=K(m),f&&(m=c.getAttribute("data-transition-delay")||0,n=c.getAttribute("data-transition-duration")||
1,m=N(m,n,d),n=c.getAttribute("data-transition-ease")||h,F.from(c,{duration:m.duration,ease:J(n),...f},m.delay))}});X.forEach(c=>{const v=B(c);if(v.length>0&&!Array.from(W).some(n=>B(n).some(H=>v.includes(H)))){T(c);gsap.killTweensOf(c);var f=c.getAttribute("data-transition-animation-to")||c.getAttribute("data-transition-animation");if(f){let n;f.includes(":")||(n=O(f));n||=K(f);if(n){f=c.getAttribute("data-transition-delay")||0;var m=c.getAttribute("data-transition-duration")||1;f=N(f,m,d);m=c.getAttribute("data-transition-ease")||
h;F.to(c,{duration:f.duration,ease:J(m),...n},f.delay)}}}});var Y=(c,v)=>{var f=c.getAttribute(`data-transition-animation-${v?"from":"to"}`)||c.getAttribute("data-transition-animation");if(f){T(c);gsap.killTweensOf(c);let n;f.includes(":")||(n=O(f));n||=K(f);if(n){f=c.getAttribute("data-transition-delay")||0;var m=c.getAttribute("data-transition-duration")||1;f=N(f,m,d);m=c.getAttribute("data-transition-ease")||h;F[v?"from":"to"](c,{duration:f.duration,ease:J(m),...n},f.delay)}}};k=Array.from(x.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(c=>
B(c).length===0);p=Array.from(u.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(c=>B(c).length===0);k.forEach(c=>Y(c,!0));p.forEach(c=>Y(c,!1));L.has(a)||L.set(a,{});L.get(a).masterTimeline=F}else console.warn('HypeSceneMagic: Target scene "'+b+'" not found.')};a.magicCard||(a.magicCard=function(b,d){d=d||{};typeof d==="number"&&(d={duration:d});b||="\x3e";const h=this.sceneNames();var g=this.currentSceneName();g=h.indexOf(g);
let k=null;if(b==="\x3e"||b==="\x3c")k=h[(g+(b==="\x3e"?1:-1)+h.length)%h.length];else if(b.startsWith("\x3e")||b.startsWith("\x3c")){var D=b.charAt(0);const p=b.substring(1);D=D==="\x3e"?1:-1;for(let t=1;t<=h.length;t++){const z=(g+D*t+h.length)%h.length;if(h[z].startsWith(p)){k=h[z];break}}if(!k){console.warn('HypeSceneMagic: Can not resolve target scene for "'+b+'".');return}}else k=b;k&&this.showSceneNamedMagic(k,d.duration,d.ease,d)});a.showNextSceneMagic=function(b,d,h){var g=this.sceneNames();
const k=g.indexOf(this.currentSceneName());g=g[k+1];g!=null&&a.showSceneNamedMagic(g,b,d,h)};a.showPreviousSceneMagic=function(b,d,h){var g=this.sceneNames();const k=g.indexOf(this.currentSceneName());g=g[k-1];g!=null&&a.showSceneNamedMagic(g,b,d,h)};a.applyAnimation=function(b,d,h={}){gsap.killTweensOf(b);let g,k=b;if(typeof b==="string"&&(k=document.getElementById(this.currentSceneId()).querySelectorAll(b),k.length===0))return null;typeof d==="string"?(d.includes(":")||(g=O(d)),g||=K(d)):typeof d===
"object"&&(g=d);if(!g)return null;const D=y("hypePropertyMap");b={ease:J(h.ease),duration:h.duration||y("durationAnimation"),...g,...h,onComplete:()=>{h.skipHypeSync||(k.length?k:[k]).forEach(p=>{Object.entries(g).forEach(([t,z])=>{(t=D[t])&&(Array.isArray(t)?t.forEach(u=>{this.setElementProperty(p,u,z)}):this.setElementProperty(p,t,z))})});if(h.onComplete)h.onComplete()}};return h.from||g.from?gsap.from(k,b):gsap.to(k,b)}}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,
e,l){e&&e.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id], [data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]').forEach(b=>{C.has(b)||C.set(b,R(b))})}});return{version:"2.7.3",getDefault:y,setDefault:function(a,e){typeof a=="object"?I=a:I[a]=e},clearCachedMagicProperties:function(a){a?C.delete(a):C=new WeakMap},getTransitionIdentifiers:B,registerAnimation:U}}());
