/*
 Hype SceneMagic 2.7.0 (GSAP Version)
 Copyright (c) 2024 Max Ziebell, (https://maxziebell.de). MIT-license
 Requires GSAP animation library (https://greensock.com/gsap/)
*/
'use strict';"HypeSceneMagic"in window===!1&&(window.HypeSceneMagic=function(){function R(a){const d={},h=y("defaultProperties");for(let e in h)y("skipProperties").includes(e)||(d[e]=a.style[e]||h[e]);return d}function y(a){return a?F[a]:F}function G(a){a=a||"power1.inOut";return y("easingMap")[a.toLowerCase()]||a}function aa(a){return a.parentElement&&a.parentElement.classList.contains("HYPE_element_container")?a.parentElement:a}function ba(a,d){return d==="front"||d==="back"?(a=Array.from(a.parentElement.children).map(h=>
parseInt(getComputedStyle(h).zIndex)||0),d==="front"?(Math.max(...a)+1).toString():(Math.min(...a)-1).toString()):d}function B(a){const d=[];a.classList.forEach(h=>{h.toLowerCase().startsWith("magic")&&h.length>5&&d.push(h.slice(5).toLowerCase())});(a=a.getAttribute("data-transition-id"))&&d.push(...a.split(",").map(h=>h.trim().toLowerCase()).map(h=>h.startsWith("magic")?h.slice(5):h).filter(Boolean));return[...(new Set(d))]}function M(a,d,h){const e=c=>{if(typeof c==="string"){if(c.endsWith("%"))return parseFloat(c)/
100*parseFloat(h);if(c.endsWith("ms"))return parseFloat(c)/1E3;if(c.endsWith("s"))return parseFloat(c)}return parseFloat(c)*parseFloat(h)};a=e(a);d=e(d);return{delay:a,duration:d}}function ca(){if(!document.getElementById("magicTransitionStyle")){let a=document.createElement("style");a.id="magicTransitionStyle";a.textContent=".magicTransition, .magicTransition * { pointer-events: none !important; }.magicTransition \x3e .HYPE_scene { transform: none !important; }.magicTransition \x3e .HYPE_scene.currentScene { z-index: 1 !important; display: block !important; }.magicTransition \x3e .HYPE_scene.targetScene { z-index: 2 !important; display: block !important; opacity: var(--scene-opacity, 0) !important; }.magicTransition \x3e .HYPE_document \x3e .HYPE_element_container { z-index: 1000 !important; }.magicTransition \x3e .HYPE_scene.currentScene.fadeComplete { display: none !important; }.magicTransition \x3e .HYPE_scene.targetScene.fadeComplete { opacity: 1 !important; }";
document.head.appendChild(a)}}function J(a){if(!a)return null;const d={},h=["scale","scaleX","scaleY","scaleZ"];a.split(";").filter(Boolean).forEach(e=>{const [c,l]=e.trim().split(":").map(f=>f.trim());h.includes(c)&&l.endsWith("%")?d[c]=parseFloat(l)/100:d[c]=l});return d}function T(a,d){typeof d==="string"&&(d=J(d));F.registeredAnimations[a.toLowerCase()]=d}function N(a){return F.registeredAnimations[a.toLowerCase()]||null}function U(a){if(!a)return{rotations:{},transform:""};const d={};a=a.replace(/(rotate[XYZ]?|rotate)\(([^)]+)\)/g,
(h,e,c)=>{d[e]=c;return""}).trim();return{rotations:d,transform:a}}function da(a){a.forEach(d=>{const h=A.get(d);h&&["width","height"].forEach(e=>{if(h[e]==="auto"){const c=d["offset"+e.charAt(0).toUpperCase()+e.slice(1)]+"px";d.style[e]=c;h[e]=c}})})}function V(a){a%=360;a>180?a-=360:a<=-180&&(a+=360);return a}let F={easingMap:{easein:"power1.in",easeout:"power1.out",easeinout:"power1.inOut"},defaultProperties:{width:"auto",height:"auto",opacity:1,borderRadius:"0px",transform:"",wordSpacing:"normal",
backgroundColor:"transparent",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",textAlign:"left",textShadow:"none",lineHeight:"normal",letterSpacing:"normal",textDecoration:"none"},crossFadeFactor:.5,durationTransition:.5,durationAnimation:.25,registeredAnimations:{},hypePropertyMap:{x:"left",y:"top",scale:["scaleX","scaleY"],scaleX:"scaleX",scaleY:"scaleY",rotation:"rotateZ",opacity:"opacity",width:"width",height:"height",zIndex:"z-index"},skipProperties:["fontFamily"],
decomposeTransform:!0,autoDimensions:!0},A=new WeakMap,O=new WeakMap;const K=new WeakMap;"HYPE_eventListeners"in window===!1&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,d,h){ca();a.registerAnimation=T;a.showSceneNamedMagic=function(e,c,l,f={}){if(d.classList.contains("magicTransition")){var m=K.get(a);m&&m.masterTimeline&&(m.masterTimeline.progress(1),delete m.masterTimeline,console.warn("HypeSceneMagic: Previous magic transition was interrupted by a new one. This indicates overlapping magic transitions in your Hype document."))}m=
this.currentSceneName();const P=this.currentLayoutName();if(e!==m){var p=this.layoutsForSceneNamed(m),z=p.find(b=>{if(b.name===P)return!0})||p[0];p=this.layoutsForSceneNamed(e);var H=p.find(b=>b.name===P)||p.find(b=>b.width===z.width&&b.height===z.height)||p[0];p=z._;H=H._;var r=document.querySelector(`#${this.documentId()} > [hype_scene_index="${p}"]`),t=document.querySelector(`#${this.documentId()} > [hype_scene_index="${H}"]`);if(t!==null){O=new WeakMap;c=c||y("durationTransition");p=f.crossFadeFactor!==
void 0?f.crossFadeFactor:y("crossFadeFactor");p*=c;d.classList.add("magicTransition");r.classList.add("currentScene");t.classList.add("targetScene");if(f.onTransitionPrepare)f.onTransitionPrepare(r,t,{duration:c,ease:l});a.triggerCustomBehaviorNamed("magicTransitionStart");a.triggerCustomBehaviorNamed(`magicTransitionFrom_${m.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransitionTo_${e.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransition_${m.replace(/\s+/g,"")}_to_${e.replace(/\s+/g,
"")}`);a.showSceneNamed(e,a.kSceneTransitionCrossfade,c);var C=gsap.timeline({onStart:()=>{if(f.onTransitionStart)f.onTransitionStart(r,t,{duration:c,ease:l})},onUpdate:function(){if(f.onTransitionProgress)f.onTransitionProgress(this.progress(),r,t)},onComplete:()=>{const b=()=>{var q=getComputedStyle(t).opacity;if(parseFloat(q)==1){requestAnimationFrame(()=>{W.forEach(g=>{const k=O.get(g);k&&gsap.set(g,k)})});d.classList.remove("magicTransition");r.classList.remove("currentScene","fadeComplete");
t.classList.remove("targetScene","fadeComplete");if(f.onTransitionEnd)f.onTransitionEnd(r,t,{duration:c,ease:l});a.triggerCustomBehaviorNamed("magicTransitionEnd");(q=K.get(a))&&delete q.masterTimeline}else requestAnimationFrame(b)};b()}});C.to({},{duration:c});C.fromTo(t,{"--scene-opacity":0},{"--scene-opacity":1,duration:p,ease:"none",onComplete:()=>{r.classList.add("fadeComplete");t.classList.add("fadeComplete");gsap.killTweensOf(r.querySelectorAll("*"))}},0);var X=t.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),
Y=r.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),W=new Set,S=b=>{A.has(b)&&!O.has(b)&&O.set(b,A.get(b));W.add(b)};X.forEach(b=>{const q=B(b);if(q.length>0){const I=Array.from(Y).find(u=>B(u).some(v=>q.includes(v)));if(I){gsap.killTweensOf([b,I]);S(I);const u=R(I),v=A.get(b)||R(b);function Q(w,D){let x=I.getAttribute(w);return x==="target"?b.getAttribute(w)||D:x||D}var g=Q("data-transition-delay",0),k=Q("data-transition-duration",1),n=Q("data-transition-order",null);g=M(g,k,
c);k=Q("data-transition-ease",l);let L=null;n!==null&&(L=aa(b),n=ba(L,n),gsap.set(L,{zIndex:n}));n=gsap.timeline({onComplete:()=>{L&&gsap.set(L,{clearProps:"zIndex"})}});if(y("decomposeTransform")){var E=U(u.transform);Object.assign(u,E.rotations);u.transform=E.transform;E=U(v.transform);Object.assign(v,E.rotations);v.transform=E.transform;["rotate","rotateX","rotateY","rotateZ"].forEach(w=>{var D=parseFloat(u[w])||0,x=parseFloat(v[w])||0;D=V(D);x=V(x)-D;x>180?x-=360:x<-180&&(x+=360);x!==0&&(u[w]=
D+"deg",v[w]=`+=${x}`)});["width","height"].forEach(w=>{u[w]==="auto"&&v[w]==="auto"&&(delete u[w],delete v[w])})}console.log(`ID: ${q.join(", ")}`,"---",u,v);n.fromTo(b,u,{...v,duration:g.duration,ease:G(k)},g.delay);n.fromTo(I,u,{...v,duration:g.duration,ease:G(k)},g.delay);C.add(n,0)}else if(k=b.getAttribute("data-transition-animation-from")||b.getAttribute("data-transition-animation"))gsap.killTweensOf(b),k.includes(":")||(g=N(k)),g||=J(k),g&&(k=b.getAttribute("data-transition-delay")||0,n=b.getAttribute("data-transition-duration")||
1,k=M(k,n,c),n=b.getAttribute("data-transition-ease")||l,C.from(b,{duration:k.duration,ease:G(n),...g},k.delay))}});Y.forEach(b=>{const q=B(b);if(q.length>0&&!Array.from(X).some(n=>B(n).some(E=>q.includes(E)))){S(b);gsap.killTweensOf(b);var g=b.getAttribute("data-transition-animation-to")||b.getAttribute("data-transition-animation");if(g){let n;g.includes(":")||(n=N(g));n||=J(g);if(n){g=b.getAttribute("data-transition-delay")||0;var k=b.getAttribute("data-transition-duration")||1;g=M(g,k,c);k=b.getAttribute("data-transition-ease")||
l;C.to(b,{duration:g.duration,ease:G(k),...n},g.delay)}}}});var Z=(b,q)=>{var g=b.getAttribute(`data-transition-animation-${q?"from":"to"}`)||b.getAttribute("data-transition-animation");if(g&&(S(b),gsap.killTweensOf(b),g=g.includes(":")?J(g):N(g))){var k=b.getAttribute("data-transition-delay")||0,n=b.getAttribute("data-transition-duration")||1;k=M(k,n,c);n=b.getAttribute("data-transition-ease")||l;C[q?"from":"to"](b,{duration:k.duration,ease:G(n),...g},k.delay)}};e=Array.from(t.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(b=>
B(b).length===0);m=Array.from(r.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(b=>B(b).length===0);e.forEach(b=>Z(b,!0));m.forEach(b=>Z(b,!1));K.has(a)||K.set(a,{});K.get(a).masterTimeline=C}}};a.showNextSceneMagic=function(e,c,l){var f=this.sceneNames();const m=f.indexOf(this.currentSceneName());f=f[m+1];f!=null&&a.showSceneNamedMagic(f,e,c,l)};a.showPreviousSceneMagic=function(e,c,l){var f=this.sceneNames();const m=f.indexOf(this.currentSceneName());
f=f[m-1];f!=null&&a.showSceneNamedMagic(f,e,c,l)};a.applyAnimation=function(e,c,l={}){gsap.killTweensOf(e);let f,m=e;if(typeof e==="string"&&(m=document.getElementById(this.currentSceneId()).querySelectorAll(e),m.length===0))return null;typeof c==="string"?(c.includes(":")||(f=N(c)),f||=J(c)):typeof c==="object"&&(f=c);if(!f)return null;const P=y("hypePropertyMap");e={ease:G(l.ease),duration:l.duration||y("durationAnimation"),...f,...l,onComplete:()=>{l.skipHypeSync||(m.length?m:[m]).forEach(p=>{Object.entries(f).forEach(([z,
H])=>{(z=P[z])&&(Array.isArray(z)?z.forEach(r=>{this.setElementProperty(p,r,H)}):this.setElementProperty(p,z,H))})});if(l.onComplete)l.onComplete()}};return l.from||f.from?gsap.from(m,e):gsap.to(m,e)}}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,d,h){if(d){const e=d.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id], [data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]');e.forEach(c=>{A.has(c)||A.set(c,
R(c))});y("autoDimensions")&&requestAnimationFrame(()=>{da(e)})}}});return{version:"2.7.0",getDefault:y,setDefault:function(a,d){typeof a=="object"?F=a:F[a]=d},clearCachedMagicProperties:function(a){a?A.delete(a):A=new WeakMap},getTransitionIdentifiers:B,registerAnimation:T}}());
