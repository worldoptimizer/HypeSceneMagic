/*
 Hype SceneMagic 2.7.0 (GSAP Version)
 Copyright (c) 2024 Max Ziebell, (https://maxziebell.de). MIT-license
 Requires GSAP animation library (https://greensock.com/gsap/)
*/
'use strict';"HypeSceneMagic"in window===!1&&(window.HypeSceneMagic=function(){function R(a){const e={},l=z("defaultProperties");for(let d in l)z("skipProperties").includes(d)||(e[d]=a.style[d]||l[d]);return e}function z(a){return a?H[a]:H}function I(a){a=a||"power1.inOut";return z("easingMap")[a.toLowerCase()]||a}function aa(a){return a.parentElement&&a.parentElement.classList.contains("HYPE_element_container")?a.parentElement:a}function ba(a,e){return e==="front"||e==="back"?(a=Array.from(a.parentElement.children).map(l=>
parseInt(getComputedStyle(l).zIndex)||0),e==="front"?(Math.max(...a)+1).toString():(Math.min(...a)-1).toString()):e}function D(a){const e=[];a.classList.forEach(l=>{l.toLowerCase().startsWith("magic")&&l.length>5&&e.push(l.slice(5).toLowerCase())});(a=a.getAttribute("data-transition-id"))&&e.push(...a.split(",").map(l=>l.trim().toLowerCase()).map(l=>l.startsWith("magic")?l.slice(5):l).filter(Boolean));return[...(new Set(e))]}function N(a,e,l){const d=c=>{if(typeof c==="string"){if(c.endsWith("%"))return parseFloat(c)/
100*parseFloat(l);if(c.endsWith("ms"))return parseFloat(c)/1E3;if(c.endsWith("s"))return parseFloat(c)}return parseFloat(c)*parseFloat(l)};a=d(a);e=d(e);return{delay:a,duration:e}}function ca(){if(!document.getElementById("magicTransitionStyle")){let a=document.createElement("style");a.id="magicTransitionStyle";a.textContent=".magicTransition, .magicTransition * { pointer-events: none !important; }.magicTransition \x3e .HYPE_scene { transform: none !important; }.magicTransition \x3e .HYPE_scene.currentScene { z-index: 1 !important; display: block !important; }.magicTransition \x3e .HYPE_scene.targetScene { z-index: 2 !important; display: block !important; opacity: var(--scene-opacity, 0) !important; }.magicTransition \x3e .HYPE_document \x3e .HYPE_element_container { z-index: 1000 !important; }.magicTransition \x3e .HYPE_scene.currentScene.fadeComplete { display: none !important; }.magicTransition \x3e .HYPE_scene.targetScene.fadeComplete { opacity: 1 !important; }";
document.head.appendChild(a)}}function K(a){if(!a)return null;const e={},l=["scale","scaleX","scaleY","scaleZ"];a.split(";").filter(Boolean).forEach(d=>{const [c,g]=d.trim().split(":").map(f=>f.trim());l.includes(c)&&g.endsWith("%")?e[c]=parseFloat(g)/100:e[c]=g});return e}function T(a,e){typeof e==="string"&&(e=K(e));H.registeredAnimations[a.toLowerCase()]=e}function O(a){return H.registeredAnimations[a.toLowerCase()]||null}function U(a){if(!a)return{rotations:{},transform:""};const e={};a=a.replace(/(rotate[XYZ]?|rotate)\(([^)]+)\)/g,
(l,d,c)=>{e[d]=c;return""}).trim();return{rotations:e,transform:a}}function da(a){a.forEach(e=>{const l=B.get(e);l&&["width","height"].forEach(d=>{if(l[d]==="auto"){const c=e["offset"+d.charAt(0).toUpperCase()+d.slice(1)]+"px";e.style[d]=c;l[d]=c}})})}function V(a){a%=360;a>180?a-=360:a<=-180&&(a+=360);return a}let H={easingMap:{easein:"power1.in",easeout:"power1.out",easeinout:"power1.inOut"},defaultProperties:{width:"auto",height:"auto",opacity:1,borderRadius:"0px",transform:"",wordSpacing:"normal",
backgroundColor:"transparent",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",textAlign:"left",textShadow:"none",lineHeight:"normal",letterSpacing:"normal",textDecoration:"none"},crossFadeFactor:.5,durationTransition:.5,durationAnimation:.25,registeredAnimations:{},hypePropertyMap:{x:"left",y:"top",scale:["scaleX","scaleY"],scaleX:"scaleX",scaleY:"scaleY",rotation:"rotateZ",opacity:"opacity",width:"width",height:"height",zIndex:"z-index"},skipProperties:["fontFamily"],
decomposeTransform:!0,autoDimensions:!0},B=new WeakMap,P=new WeakMap;const L=new WeakMap;"HYPE_eventListeners"in window===!1&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,e,l){ca();a.registerAnimation=T;a.showSceneNamedMagic=function(d,c,g,f={}){if(e.classList.contains("magicTransition")){var h=L.get(a);h&&h.masterTimeline&&(h.masterTimeline.progress(1),delete h.masterTimeline,console.warn("HypeSceneMagic: Previous magic transition was interrupted by a new one. This indicates overlapping magic transitions in your Hype document."))}h=
this.currentSceneName();const C=this.currentLayoutName();if(d!==h)if(this.sceneNames().includes(d)){var p=this.layoutsForSceneNamed(h),q=p.find(b=>{if(b.name===C)return!0})||p[0];p=this.layoutsForSceneNamed(d);var A=p.find(b=>b.name===C)||p.find(b=>b.width===q.width&&b.height===q.height)||p[0];p=q._;A=A._;var t=document.querySelector(`#${this.documentId()} > [hype_scene_index="${p}"]`),x=document.querySelector(`#${this.documentId()} > [hype_scene_index="${A}"]`);P=new WeakMap;c=c||z("durationTransition");
p=f.crossFadeFactor!==void 0?f.crossFadeFactor:z("crossFadeFactor");p*=c;e.classList.add("magicTransition");t.classList.add("currentScene");x.classList.add("targetScene");if(f.onTransitionPrepare)f.onTransitionPrepare(t,x,{duration:c,ease:g});a.triggerCustomBehaviorNamed("magicTransitionStart");a.triggerCustomBehaviorNamed(`magicTransitionFrom_${h.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransitionTo_${d.replace(/\s+/g,"")}`);a.triggerCustomBehaviorNamed(`magicTransition_${h.replace(/\s+/g,
"")}_to_${d.replace(/\s+/g,"")}`);a.showSceneNamed(d,a.kSceneTransitionCrossfade,c);var E=gsap.timeline({onStart:()=>{if(f.onTransitionStart)f.onTransitionStart(t,x,{duration:c,ease:g})},onUpdate:function(){if(f.onTransitionProgress)f.onTransitionProgress(this.progress(),t,x)},onComplete:()=>{const b=()=>{var r=getComputedStyle(x).opacity;if(parseFloat(r)==1){requestAnimationFrame(()=>{W.forEach(k=>{const m=P.get(k);m&&gsap.set(k,m)})});e.classList.remove("magicTransition");t.classList.remove("currentScene",
"fadeComplete");x.classList.remove("targetScene","fadeComplete");if(f.onTransitionEnd)f.onTransitionEnd(t,x,{duration:c,ease:g});a.triggerCustomBehaviorNamed("magicTransitionEnd");(r=L.get(a))&&delete r.masterTimeline}else requestAnimationFrame(b)};b()}});E.to({},{duration:c});E.fromTo(x,{"--scene-opacity":0},{"--scene-opacity":1,duration:p,ease:"none",onComplete:()=>{t.classList.add("fadeComplete");x.classList.add("fadeComplete");gsap.killTweensOf(t.querySelectorAll("*"))}},0);var X=x.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),
Y=t.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id]'),W=new Set,S=b=>{B.has(b)&&!P.has(b)&&P.set(b,B.get(b));W.add(b)};X.forEach(b=>{const r=D(b);if(r.length>0){const J=Array.from(Y).find(u=>D(u).some(v=>r.includes(v)));if(J){gsap.killTweensOf([b,J]);S(J);const u=R(J),v=B.get(b)||R(b);function Q(w,F){let y=J.getAttribute(w);return y==="target"?b.getAttribute(w)||F:y||F}var k=Q("data-transition-delay",0),m=Q("data-transition-duration",1),n=Q("data-transition-order",null);k=N(k,m,
c);m=Q("data-transition-ease",g);let M=null;n!==null&&(M=aa(b),n=ba(M,n),gsap.set(M,{zIndex:n}));n=gsap.timeline({onComplete:()=>{M&&gsap.set(M,{clearProps:"zIndex"})}});if(z("decomposeTransform")){var G=U(u.transform);Object.assign(u,G.rotations);u.transform=G.transform;G=U(v.transform);Object.assign(v,G.rotations);v.transform=G.transform;["rotate","rotateX","rotateY","rotateZ"].forEach(w=>{var F=parseFloat(u[w])||0,y=parseFloat(v[w])||0;F=V(F);y=V(y)-F;y>180?y-=360:y<-180&&(y+=360);y!==0&&(u[w]=
F+"deg",v[w]=`+=${y}`)});["width","height"].forEach(w=>{u[w]==="auto"&&v[w]==="auto"&&(delete u[w],delete v[w])})}console.log(`ID: ${r.join(", ")}`,"---",u,v);n.fromTo(b,u,{...v,duration:k.duration,ease:I(m)},k.delay);n.fromTo(J,u,{...v,duration:k.duration,ease:I(m)},k.delay);E.add(n,0)}else if(m=b.getAttribute("data-transition-animation-from")||b.getAttribute("data-transition-animation"))gsap.killTweensOf(b),m.includes(":")||(k=O(m)),k||=K(m),k&&(m=b.getAttribute("data-transition-delay")||0,n=b.getAttribute("data-transition-duration")||
1,m=N(m,n,c),n=b.getAttribute("data-transition-ease")||g,E.from(b,{duration:m.duration,ease:I(n),...k},m.delay))}});Y.forEach(b=>{const r=D(b);if(r.length>0&&!Array.from(X).some(n=>D(n).some(G=>r.includes(G)))){S(b);gsap.killTweensOf(b);var k=b.getAttribute("data-transition-animation-to")||b.getAttribute("data-transition-animation");if(k){let n;k.includes(":")||(n=O(k));n||=K(k);if(n){k=b.getAttribute("data-transition-delay")||0;var m=b.getAttribute("data-transition-duration")||1;k=N(k,m,c);m=b.getAttribute("data-transition-ease")||
g;E.to(b,{duration:k.duration,ease:I(m),...n},k.delay)}}}});var Z=(b,r)=>{var k=b.getAttribute(`data-transition-animation-${r?"from":"to"}`)||b.getAttribute("data-transition-animation");if(k&&(S(b),gsap.killTweensOf(b),k=k.includes(":")?K(k):O(k))){var m=b.getAttribute("data-transition-delay")||0,n=b.getAttribute("data-transition-duration")||1;m=N(m,n,c);n=b.getAttribute("data-transition-ease")||g;E[r?"from":"to"](b,{duration:m.duration,ease:I(n),...k},m.delay)}};d=Array.from(x.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(b=>
D(b).length===0);h=Array.from(t.querySelectorAll("[data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]")).filter(b=>D(b).length===0);d.forEach(b=>Z(b,!0));h.forEach(b=>Z(b,!1));L.has(a)||L.set(a,{});L.get(a).masterTimeline=E}else console.warn('HypeSceneMagic: Target scene "'+d+'" not found.')};a.magicCard||(a.magicCard=function(d,c){c=c||{};typeof c==="number"&&(c={duration:c});d||="\x3e";const g=this.sceneNames();var f=this.currentSceneName();f=g.indexOf(f);
let h=null;if(d==="\x3e"||d==="\x3c")h=g[(f+(d==="\x3e"?1:-1)+g.length)%g.length];else if(d.startsWith("\x3e")||d.startsWith("\x3c")){var C=d.charAt(0);const p=d.substring(1);C=C==="\x3e"?1:-1;for(let q=1;q<=g.length;q++){const A=(f+C*q+g.length)%g.length;if(g[A].startsWith(p)){h=g[A];break}}if(!h){console.warn('HypeSceneMagic: Can not resolve target scene for "'+d+'".');return}}else h=d;h&&this.showSceneNamedMagic(h,c.duration,c.ease,c)});a.showNextSceneMagic=function(d,c,g){var f=this.sceneNames();
const h=f.indexOf(this.currentSceneName());f=f[h+1];f!=null&&a.showSceneNamedMagic(f,d,c,g)};a.showPreviousSceneMagic=function(d,c,g){var f=this.sceneNames();const h=f.indexOf(this.currentSceneName());f=f[h-1];f!=null&&a.showSceneNamedMagic(f,d,c,g)};a.applyAnimation=function(d,c,g={}){gsap.killTweensOf(d);let f,h=d;if(typeof d==="string"&&(h=document.getElementById(this.currentSceneId()).querySelectorAll(d),h.length===0))return null;typeof c==="string"?(c.includes(":")||(f=O(c)),f||=K(c)):typeof c===
"object"&&(f=c);if(!f)return null;const C=z("hypePropertyMap");d={ease:I(g.ease),duration:g.duration||z("durationAnimation"),...f,...g,onComplete:()=>{g.skipHypeSync||(h.length?h:[h]).forEach(p=>{Object.entries(f).forEach(([q,A])=>{(q=C[q])&&(Array.isArray(q)?q.forEach(t=>{this.setElementProperty(p,t,A)}):this.setElementProperty(p,q,A))})});if(g.onComplete)g.onComplete()}};return g.from||f.from?gsap.from(h,d):gsap.to(h,d)}}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,
e,l){if(e){const d=e.querySelectorAll('div[class*\x3d"magic"], div[data-transition-id], [data-transition-animation], [data-transition-animation-from], [data-transition-animation-to]');d.forEach(c=>{B.has(c)||B.set(c,R(c))});z("autoDimensions")&&requestAnimationFrame(()=>{da(d)})}}});return{version:"2.7.0",getDefault:z,setDefault:function(a,e){typeof a=="object"?H=a:H[a]=e},clearCachedMagicProperties:function(a){a?B.delete(a):B=new WeakMap},getTransitionIdentifiers:D,registerAnimation:T}}());
